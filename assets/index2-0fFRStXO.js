import{r as C,j as y,R as b}from"./index-Ba3bjXgo.js";import{M as B}from"./App2-DXYpsw6s.js";const i=412,o=915,m=150,O=22,U=50,W=4,F=20,H=800,V=.3,s=40;function q(){const A=C.useRef(null);return C.useEffect(()=>{const p=A.current,c=p.getContext("2d");p.width=i,p.height=o;const{Engine:g,World:I,Bodies:f,Events:P}=B,a=g.create();a.gravity.y=1.2;const D=f.rectangle(-s/2,o/2,s,o*2,{isStatic:!0}),L=f.rectangle(i+s/2,o/2,s,o*2,{isStatic:!0}),E=f.rectangle(i/2,o+s/2,i+s*2,s,{isStatic:!0});I.add(a.world,[D,L,E]);const R=new Image;R.src="/coin.png";const h=[];let r=0,_=0,M=null,e="fill";function j(){const t=O+Math.random()*(U-O),u=t+Math.random()*(i-t*2),N=-t*2-Math.random()*80,n=f.circle(u,N,t,{restitution:V,friction:.3,density:.002});n.coinRadius=t,I.add(a.world,n),h.push(n),r++}let S,w=null;function T(t){w||(w=t);const u=t-w;if(e==="fill"){const n=r/m,l=Math.max(1,Math.floor(1+n*(W-1)));if(r<m&&u-_>F){for(let d=0;d<l&&r<m;d++)j();_=u}r>=m&&(e="hold",M=t)}e==="hold"&&t-M>H&&(e="drop",I.remove(a.world,E)),e==="drop"&&(h.some(l=>l.position.y<o+200)||(e="end")),g.update(a,1e3/60),c.clearRect(0,0,i,o);const N=1/.85;for(const n of h){const{x:l,y:d}=n.position;if(d>o+300)continue;const x=n.coinRadius*N,v=x*2;c.save(),c.translate(l,d),c.rotate(n.angle),c.drawImage(R,-x,-x,v,v),c.restore()}e!=="end"&&(S=requestAnimationFrame(T))}return R.onload=()=>{S=requestAnimationFrame(T)},()=>{cancelAnimationFrame(S),g.clear(a)}},[]),y.jsx("div",{className:"app",children:y.jsx("canvas",{ref:A,className:"coin-canvas"})})}const K=b.createRoot(document.getElementById("root"));K.render(y.jsx(q,{}));
