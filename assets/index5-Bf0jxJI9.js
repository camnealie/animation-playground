import{r as F,j as A,R as $}from"./index-Ba3bjXgo.js";import{M as b}from"./App2-DXYpsw6s.js";const l=412,d=915,k=800;function I(){const R=F.useRef(null);return F.useEffect(()=>{const u=R.current,s=u.getContext("2d");u.width=l,u.height=d;const{Engine:g,World:H,Bodies:S,Body:w,Vertices:N}=b,f=g.create();f.gravity.y=0;const h=[],y=8,x=16,W=l/y,q=d/x,a=[];for(let o=0;o<=x;o++){a[o]=[];for(let t=0;t<=y;t++){const n=t===0||t===y?0:(Math.random()-.5)*W*.6,e=o===0||o===x?0:(Math.random()-.5)*q*.6;a[o][t]={x:t*W+n,y:o*q+e}}}for(let o=0;o<x;o++)for(let t=0;t<y;t++){const n=a[o][t],e=a[o][t+1],r=a[o+1][t],c=a[o+1][t+1];[[n,e,r],[e,c,r]].forEach(i=>{const B=(i[0].x+i[1].x+i[2].x)/3,C=(i[0].y+i[1].y+i[2].y)/3,Y=i.map(D=>({x:D.x-B,y:D.y-C})),p=S.fromVertices(B,C,Y,{restitution:.2,friction:.3,frictionAir:.01,density:.001});p&&(p.shardColor=`hsl(${200+Math.random()*40}, ${60+Math.random()*20}%, ${40+Math.random()*20}%)`,p.originalVerts=i,h.push(p))})}H.add(f.world,h);let M,E=null,m="hold";function v(o){if(m==="hold"&&(E||(E=o),o-E>k)){m="explode";const t=l/2,n=d/2;h.forEach(e=>{const r=e.position.x-t,c=e.position.y-n,V=Math.sqrt(r*r+c*c)||1,j=.08+Math.random()*.06;w.setVelocity(e,{x:r/V*j*60,y:c/V*j*60}),w.setAngularVelocity(e,(Math.random()-.5)*.3)}),f.gravity.y=.5}m==="explode"&&(h.some(n=>n.position.x>-100&&n.position.x<l+100&&n.position.y>-100&&n.position.y<d+300)||(m="end")),g.update(f,1e3/60),s.clearRect(0,0,l,d);for(const t of h){const{x:n,y:e}=t.position;if(n<-200||n>l+200||e<-200||e>d+400)continue;s.save(),s.translate(n,e),s.rotate(t.angle);const r=t.vertices;s.beginPath(),s.moveTo(r[0].x-n,r[0].y-e);for(let c=1;c<r.length;c++)s.lineTo(r[c].x-n,r[c].y-e);s.closePath(),s.fillStyle=t.shardColor,s.fill(),s.strokeStyle="rgba(255,255,255,0.3)",s.lineWidth=1,s.stroke(),s.restore()}m!=="end"&&(M=requestAnimationFrame(v))}return M=requestAnimationFrame(v),()=>{cancelAnimationFrame(M),g.clear(f)}},[]),A.jsx("div",{className:"app",children:A.jsx("canvas",{ref:R,className:"coin-canvas"})})}const L=$.createRoot(document.getElementById("root"));L.render(A.jsx(I,{}));
