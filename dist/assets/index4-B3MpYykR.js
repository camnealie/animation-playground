import{r as j,j as D,R as k}from"./index-Ba3bjXgo.js";import{M as I}from"./App2-DXYpsw6s.js";const s=412,a=915,B=52,u=70,f=100,V=80,W=1200,d=40,H=["♠","♥","♦","♣"],F=["A","2","3","4","5","6","7","8","9","10","J","Q","K"];function K(){const E=j.useRef(null);return j.useEffect(()=>{const g=E.current,t=g.getContext("2d");g.width=s,g.height=a;const{Engine:A,World:p,Bodies:x,Body:M}=I,r=A.create();r.gravity.y=1.5;const N=x.rectangle(-d/2,a/2,d,a*2,{isStatic:!0}),_=x.rectangle(s+d/2,a/2,d,a*2,{isStatic:!0}),T=x.rectangle(s/2,a+d/2,s+d*2,d,{isStatic:!0});p.add(r.world,[N,_,T]);const R=[];let m=0,w=0,C=null,i="deal";const l=[];for(let e=0;e<4;e++)for(let n=0;n<13;n++)l.push({suit:H[e],rank:F[n],red:e===1||e===2});for(let e=l.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[l[e],l[n]]=[l[n],l[e]]}function b(){const e=s/2+(Math.random()-.5)*60,n=-f,o=x.rectangle(e,n,u*.9,f*.9,{restitution:.3,friction:.4,frictionAir:.01,density:.001,chamfer:{radius:5}}),c=(Math.random()-.5)*8,y=2+Math.random()*3;M.setVelocity(o,{x:c,y}),M.setAngularVelocity(o,(Math.random()-.5)*.15),o.card=l[m],p.add(r.world,o),R.push(o),m++}let v,S=null;function L(e){S||(S=e);const n=e-S;i==="deal"&&(m<B&&n-w>V&&(b(),w=n),m>=B&&(i="hold",C=e)),i==="hold"&&e-C>W&&(i="sweep",p.remove(r.world,T),r.gravity.x=3,r.gravity.y=2),i==="sweep"&&(R.some(c=>c.position.x<s+200&&c.position.y<a+200)||(i="end")),A.update(r,1e3/60),t.clearRect(0,0,s,a);for(const o of R){const{x:c,y}=o.position;if(c>s+300||y>a+300)continue;const h=o.card;t.save(),t.translate(c,y),t.rotate(o.angle),t.fillStyle="#fff",t.strokeStyle="#333",t.lineWidth=1.5,t.beginPath(),t.roundRect(-u/2,-f/2,u,f,5),t.fill(),t.stroke(),t.fillStyle=h.red?"#d32f2f":"#222",t.font="bold 16px Arial",t.textAlign="left",t.textBaseline="top",t.fillText(h.rank,-u/2+6,-f/2+5),t.fillText(h.suit,-u/2+6,-f/2+20),t.font="32px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText(h.suit,0,5),t.restore()}i!=="end"&&(v=requestAnimationFrame(L))}return v=requestAnimationFrame(L),()=>{cancelAnimationFrame(v),A.clear(r)}},[]),D.jsx("div",{className:"app",children:D.jsx("canvas",{ref:E,className:"coin-canvas"})})}const O=k.createRoot(document.getElementById("root"));O.render(D.jsx(K,{}));
