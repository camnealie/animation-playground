import{r as O,j as y,R as b}from"./index-Ba3bjXgo.js";import{M as W}from"./App2-DXYpsw6s.js";const i=412,e=915,m=120,T=22,B=50,F=3,H=25,U=1e3,s=40;function V(){const N=O.useRef(null);return O.useEffect(()=>{const p=N.current,c=p.getContext("2d");p.width=i,p.height=e;const{Engine:g,World:h,Bodies:f}=W,a=g.create();a.gravity.y=-1.8;const L=f.rectangle(-s/2,e/2,s,e*2,{isStatic:!0}),j=f.rectangle(i+s/2,e/2,s,e*2,{isStatic:!0}),M=f.rectangle(i/2,-s/2,i+s*2,s,{isStatic:!0});h.add(a.world,[L,j,M]);const I=new Image;I.src="/coin.png";const R=[];let r=0,_=0,C=null,o="fill";function D(){const t=T+Math.random()*(B-T),u=t+Math.random()*(i-t*2),A=e+t+Math.random()*100,n=f.circle(u,A,t,{restitution:.4,friction:.3,frictionAir:.01,density:.002});n.coinRadius=t,h.add(a.world,n),R.push(n),r++}let S,w=null;function E(t){w||(w=t);const u=t-w;if(o==="fill"){const n=r/m,l=Math.max(1,Math.floor(1+n*(F-1)));if(r<m&&u-_>H){for(let d=0;d<l&&r<m;d++)D();_=u}r>=m&&(o="hold",C=t)}o==="hold"&&t-C>U&&(o="drop",h.remove(a.world,M)),o==="drop"&&(R.some(l=>l.position.y>-200)||(o="end")),g.update(a,1e3/60),c.clearRect(0,0,i,e);const A=1/.85;for(const n of R){const{x:l,y:d}=n.position;if(d<-300)continue;const x=n.coinRadius*A,v=x*2;c.save(),c.translate(l,d),c.rotate(n.angle),c.drawImage(I,-x,-x,v,v),c.restore()}o!=="end"&&(S=requestAnimationFrame(E))}return I.onload=()=>{S=requestAnimationFrame(E)},()=>{cancelAnimationFrame(S),g.clear(a)}},[]),y.jsx("div",{className:"app",children:y.jsx("canvas",{ref:N,className:"coin-canvas"})})}const q=b.createRoot(document.getElementById("root"));q.render(y.jsx(V,{}));
